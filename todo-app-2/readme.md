# Лабораторная работа №1

**Тема:** Введение в Express.js. Создание простого приложения «ToDo List»

## Цель работы

1. Понять базовую связку Express + MVC: контроллеры, роуты, представления.
2. Научиться обрабатывать формы (GET/POST), передавать данные в шаблоны и делать redirect после успешной отправки.
3. Реализовать минимальное приложение без БД с хранением данных в памяти процесса.

## Условие

Разработать приложение "ToDo List" с возможностью:

- Просмотра списка задач.
- Создания новой задачи.
- Переключения статуса задачи (выполнена/не выполнена).
- Удаления задачи.
- 
## Шаги выполнения

### Шаг 1. Инициализация проекта

1. Создать директорию и инициализировать Node.js:

   ```bash
   mkdir todo-app
   cd todo-app
   npm init -y
   ```

2. Установить зависимости:

   ```bash
   npm install express pug dotenv
   npm install --save-dev nodemon
   ```

3. Создать структуру проекта (папки `controllers`, `models`, `routes`, `views`, `public`).
4. Настроить `.env`:

   ```env
   APP_NAME=TodoApp
   PORT=3000
   NODE_ENV=development
   ```

### Шаг 2. Настройка Express

1. Создать `app.js` в корне проекта.
2. Настроить Express:

   - Подключить **middleware**:

     - `express.urlencoded()` для обработки POST-форм
     - `express.static()` для статики (CSS, изображения)

   - Указать Pug как шаблонизатор.

3. Настроить маршруты:

   - `GET /` - список задач
   - `GET /new` - форма новой задачи
   - `POST /new` - добавление задачи
   - `POST /:id/toggle` - переключение статуса
   - `POST /:id/delete` - удаление
   - `GET /about` - страница «О нас»
   - обработка 404

4. Запустить сервер:

   ```bash
   npm run dev
   ```

###  Шаг 3. Реализация логики приложения

1. **Модели (`models/todo.js`)**

   - Использовать массив объектов для хранения задач в памяти.
   - Класс `Todo` хранит: `id`, `title`, `completed`.

2. **Контроллеры (`controllers/`)**

   - `todoController.js` - логика CRUD для задач (создание, отображение, переключение, удаление).
   - `aboutController.js` - рендер статической страницы «О нас».
   - `errorController.js` - рендер страницы 404.

3. **Роуты (`routes/index.js`)**

   - Описывают все указанные маршруты.

4. **Представления (`views/`)**

   - `layout.pug` - общий макет.
   - `index.pug` - список задач.
   - `new.pug` - форма добавления.
   - `about.pug` - «О нас».
   - `404.pug` - страница ошибки.

5. **Статические файлы (`public/style.css`)**

   - Простое оформление списков и форм.

## Структура проекта

```
todo-app/
│── app.js
│── .env
│── package.json
│
├── controllers/
│   ├── todoController.js
│   ├── aboutController.js
│   └── errorController.js
│
├── models/
│   └── todo.js
│
├── routes/
│   └── index.js
│
├── views/
│   ├── layout.pug
│   ├── index.pug
│   ├── new.pug
│   ├── about.pug
│   └── 404.pug
│
└── public/
    └── style.css
```

## Запуск

1. Установить зависимости:

   ```bash
   npm install
   ```

2. Запустить сервер:

   ```bash
   npm run dev
   ```

3. Перейти в браузере:

   ```
   http://localhost:3000
   ```

## Маршруты

- `GET /` - список задач
- `GET /new` - форма добавления
- `POST /new` - создание задачи
- `POST /:id/toggle` - переключение статуса
- `POST /:id/delete` - удаление задачи
- `GET /about` - страница «О нас»
- `*` - страница 404

## Контрольные вопросы

**1. Чем отличаются HTML-маршруты от REST API?**

- HTML-маршруты возвращают готовый HTML через `res.render`.
- REST API возвращает данные (JSON) через `res.json`.

**2. Что такое res.render и res.json? В каких случаях что использовать?`**

- `res.render` - отрисовка серверного шаблона (страница). Используется когда сервер сам генерирует страницы (SSR - server-side rendering).
- `res.json` - возврат JSON-объекта (для API). Используется когда сервер - это backend API, и данные получает фронтенд.

**3. Что такое middleware в Express и для чего используется express.urlencoded?**

- Middleware - это промежуточные функции, которые обрабатывают запрос до того, как он попадёт в маршрут. Функция express.urlencoded() — это встроенный middleware, который используется для парсинга данных, отправленных через HTML-формы.
